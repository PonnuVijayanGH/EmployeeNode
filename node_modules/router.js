/*router decides the code to execute based on request */
function route(handle, path,response,postData) {
	console.log("Received request for the path "+path);
	if (typeof handle[path] === 'function') {
		handle[path](response);
	} 
	else {
		
		var headers = {};
		 // IE8 does not allow domains to be specified, just the *
		 // headers["Access-Control-Allow-Origin"] = req.headers.origin;
		headers["Access-Control-Allow-Origin"] = "*";
		//headers["Access-Control-Allow-Methods"] = "POST, GET, PUT, DELETE, OPTIONS";
		headers["Access-Control-Allow-Credentials"] = false;
		headers["Access-Control-Max-Age"] = '86400'; // 24 hours
		
		console.log("No handlers for this request");
		response.writeHead(200, headers);
		response.write( "404 Not found");
		response.end();
	}
}

exports.route = route;